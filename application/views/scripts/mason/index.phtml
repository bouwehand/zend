<?php
/**
 * @autor: B.j.Ouwehand
 *
 */
/* Mason main page */

// the doctype helper
$doctypeHelper = new Zend_View_Helper_Doctype();
$doctypeHelper->doctype('HTML4_LOOSE');
echo $this->doctype()

?>
<html>
    <head>
        <?php echo $this->headLink()->appendStylesheet('/styles/styles.css'); ?>
        <?php echo $this->headScript()->prependFile($this->baseUrl('js/jquery-1.10.2.js'), 'text/javascript'); ?>
        <?php echo $this->headScript()->prependFile($this->baseUrl('js/masonry.pkgd.min.js'), 'text/javascript'); ?>
        <?php echo $this->headScript()->prependFile($this->baseUrl('js/imagesloaded.js'), 'text/javascript'); ?>
<?
// jquery template
$template = '<div class="book">{{:title}}</div>';
$this->headScript()->appendScript(
    $template,
    'text/x-jquery-tmpl',
    array("id=\'tmpl-book\'", 'noescape' => true)
    );
echo $this->headScript();
 ?>

    </head>
    <body>
        <pre>
      <div id="str-head"">
        </div>
        <div id="str-body">
            <div class="container">
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
                <div class="item">...</div>
                <div class="item w2">...</div>
                <div class="item">...</div>
            </div>
        </div>
      <script type="text/javascript" >
          /**
           * @autor: B.j.Ouwehand
           * @type {Node}
           *
           * I have problems with the Jquery.masonry function as is
           * described in the documentation
           * This is actualy a big workaround for not using that function
           *
           */
          var container = document.querySelector('.container');
          var msnry;


          // initialize Masonry after all images have loaded
          imagesLoaded( container, function() {
              msnry = new Masonry(container);



              var elements = msnry.getItemElements();
              var elemNum = elements.length;
              console.log(elemNum);

              // hide all elements and fadein slow
              for ( var i = 0; i < elemNum; i++ ) {
                  elem = elements[i];
                  var item = msnry.getItem(elem);

                  //workaround
                  $(elem).hide();
              }

              // Mansonry jquery method not working
              // Workaround
              for ( var i = 0; i < elemNum; i++ ) {
                elem = elements[i];
                $(elem).fadeIn(i * 400);
              }

          });
      </script>
    </body>
</html>